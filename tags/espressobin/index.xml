



<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="#stylesheet" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <xsl:stylesheet id="stylesheet" version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" exclude-result-prefixes="xsl">
    <xsl:output method="html" doctype-system="about:legacy-compat" />
    <xsl:template match="/rss">
      <html lang="">
        <head>
          <meta name="viewport" content="width=device-width, initial-scale=1.0" />
          <title>espressobin RSS | ?</title>
          <link rel="stylesheet" href="https://puhoy.github.io/css/base.min.a41b4fb7d4627ef13426f7f1bd5ebc6df8a951eea117a46e72ac2b4b0747216a.css" integrity="sha256-pBtPt9RifvE0JvfxvV68bfipUe6hF6RucqwrSwdHIWo=" />
        </head>
        <body>
          <nav class="u-background">
  <div class="u-wrapper">
    <ul class="Banner">
      <li class="Banner-item Banner-item--title">
        <a class="Banner-link u-clickable" href="https://puhoy.github.io">?</a>
      </li>
      
      <li class="Banner-item">
        <a class="Banner-link u-clickable" href="https://puhoy.github.io/posts/">posts</a>
      </li>
      
      <li class="Banner-item">
        <a class="Banner-link u-clickable" href="https://puhoy.github.io/tags/">tags</a>
      </li>
      
      <li class="Banner-item">
        <a class="Banner-link u-clickable" href="https://puhoy.github.io/index.xml">rss</a>
      </li>
      
    </ul>
  </div>
</nav>
          <main>
            <div class="u-wrapper">
              <div class="u-padding">
                <h2 class="Heading-title">
                  
                  <a class="Heading-link u-clickable" href="https://puhoy.github.io/tags/espressobin/index.xml" rel="bookmark">espressobin RSS</a>
                  
                </h2>
                
                <p>
                  To subscribe to this RSS feed, copy its address and paste it into your favorite feed reader.
                </p>
                
              </div>
            </div>
          </main>
          
<footer class="Footer">
  <div class="u-wrapper">
    <div class="u-padding">
      Except where otherwise noted, content on this site is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/" rel="license"> Creative Commons Attribution 4.0 International License</a>.
    </div>
  </div>
</footer>

        </body>
      </html>
    </xsl:template>
  </xsl:stylesheet>
  <channel>
    <title>espressobin on ?</title>
    <link>https://puhoy.github.io/tags/espressobin/</link>
    <description>Recent content in espressobin on ?</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Thu, 11 Jul 2019 14:46:02 +0200</lastBuildDate>
    <atom:link href="https://puhoy.github.io/tags/espressobin/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>installing armbian on espressobin</title>
      <link>https://puhoy.github.io/posts/armbian_on_espressobin/</link>
      <pubDate>Thu, 11 Jul 2019 14:46:02 +0200</pubDate>
      <guid>https://puhoy.github.io/posts/armbian_on_espressobin/</guid>
      <description>

&lt;p&gt;how to install &lt;a href=&#34;https://www.armbian.com/espressobin/&#34;&gt;armbian&lt;/a&gt; on espressobin&lt;/p&gt;

&lt;p&gt;things needed:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ext4 formatted usb stick (to flash the bootloader)&lt;/li&gt;
&lt;li&gt;sd card (for the os)&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;1-updating-the-bootloader&#34;&gt;1. updating the bootloader&lt;/h1&gt;

&lt;h2 id=&#34;1-1-connecting-to-the-espressobin&#34;&gt;1.1 connecting to the espressobin&lt;/h2&gt;

&lt;p&gt;the espressobin wiki has &lt;a href=&#34;http://wiki.espressobin.net/tiki-index.php?page=Serial+connection+-+Linux&#34;&gt;this guide&lt;/a&gt;,
which i followed.&lt;/p&gt;

&lt;p&gt;connect the espressobin to your computer (dont plug in the power yet!), and run &lt;code&gt;dmesg&lt;/code&gt; to get the right tty device.&lt;/p&gt;

&lt;p&gt;in my case its /dev/ttyUSB0.&lt;/p&gt;

&lt;p&gt;then, start c-kermit and paste these commands:
(change /dev/ttyUSB0 to whatever it is in your case!)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;set&lt;/span&gt; line /dev/ttyUSB0
&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;set&lt;/span&gt; speed &lt;span style=&#34;color:#bd93f9&#34;&gt;115200&lt;/span&gt;
&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;set&lt;/span&gt; carrier-watch off
&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;set&lt;/span&gt; flow-control none
&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;set&lt;/span&gt; handshake none
&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;set&lt;/span&gt; prefixing all
&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;set&lt;/span&gt; streaming off
&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;set&lt;/span&gt; parity none
connect&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;after this, you can connect power to the board.&lt;/p&gt;

&lt;p&gt;press enter on startup to stop autoboot, to access the bootloader shell.&lt;/p&gt;

&lt;h2 id=&#34;1-2-flashing-the-bootloader&#34;&gt;1.2 flashing the bootloader&lt;/h2&gt;

&lt;p&gt;in the boot logs you will find the details of yor espressobin model.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;TIM-1.0
WTMI-armada-17.10.1-4809244
ENTER init_ddrgen
DDR_TOPOLOGY is &lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt; :	DDR3, 2CS 512M + 512M
&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;WTMI_CLOCK&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt;

Fill memory before self refresh...done

Fill memory before self refresh...done

Now in Self-refresh Mode
Restore CAS Read and Write Latency
Restore termination values to original values
Exited self-refresh ...

DLL &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;TUNING&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;==============&lt;/span&gt;
   DLL 0xc0001050&lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;21&lt;/span&gt;:16&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;,21,10&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;
   DLL 0xc0001050&lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;29&lt;/span&gt;:24&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;4&lt;/span&gt;,2f,19&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;
   DLL 0xc0001054&lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;21&lt;/span&gt;:16&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt;,2b,16&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;
   DLL 0xc0001054&lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;29&lt;/span&gt;:24&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;8&lt;/span&gt;,33,1d&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;
   DLL 0xc0001074&lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;21&lt;/span&gt;:16&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;,3f,1f&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;
   DLL 0xc0001074NOTICE:  Booting Trusted Firmware
NOTICE:  BL1: v1.3&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;release&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;:armada-17.10.2:13f2984
NOTICE:  BL1: Built : &lt;span style=&#34;color:#bd93f9&#34;&gt;14&lt;/span&gt;:29:26, Oct  &lt;span style=&#34;color:#bd93f9&#34;&gt;4&lt;/span&gt; 2NOTICE:  BL2: v1.3&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;release&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;:armada-17.10.2:13f2984
NOTICE:  BL2: Built : &lt;span style=&#34;color:#bd93f9&#34;&gt;14&lt;/span&gt;:29:26, Oct  &lt;span style=&#34;color:#bd93f9&#34;&gt;4&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;2017&lt;/span&gt;
NNOTICE:  BL31: v1.3&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;release&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;:armada-17.10.2:13f2984
NOTICE:  BL31:

U-Boot &lt;span style=&#34;color:#bd93f9&#34;&gt;2017&lt;/span&gt;.03-armada-17.10.1-g440395a &lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;Sep &lt;span style=&#34;color:#bd93f9&#34;&gt;25&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;2017&lt;/span&gt; - &lt;span style=&#34;color:#bd93f9&#34;&gt;15&lt;/span&gt;:43:51 +0200&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;

Model: Marvell Armada &lt;span style=&#34;color:#bd93f9&#34;&gt;3720&lt;/span&gt; Community Board ESPRESSOBin
       CPU    @ &lt;span style=&#34;color:#bd93f9&#34;&gt;1000&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;MHz&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;
       L2     @ &lt;span style=&#34;color:#bd93f9&#34;&gt;800&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;MHz&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;
       TClock @ &lt;span style=&#34;color:#bd93f9&#34;&gt;200&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;MHz&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;
       DDR    @ &lt;span style=&#34;color:#bd93f9&#34;&gt;800&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;MHz&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;
DRAM:  &lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt; GiB
U-Boot DT blob at : 000000003f7182d8
Comphy-0: USB3          &lt;span style=&#34;color:#bd93f9&#34;&gt;5&lt;/span&gt; Gbps    
Comphy-1: PEX0          &lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt;.5 Gbps  
Comphy-2: SATA0         &lt;span style=&#34;color:#bd93f9&#34;&gt;6&lt;/span&gt; Gbps    
SATA link &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt; timeout.
AHCI &lt;span style=&#34;color:#bd93f9&#34;&gt;0001&lt;/span&gt;.0300 &lt;span style=&#34;color:#bd93f9&#34;&gt;32&lt;/span&gt; slots &lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt; ports &lt;span style=&#34;color:#bd93f9&#34;&gt;6&lt;/span&gt; Gbps 0x1 impl SATA mode
flags: ncq led only pmp fbss pio slum part sxs 
PCIE-0: Link down
MMC:   sdhci@d0000: &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;
SF: Detected w25q32dw with page size &lt;span style=&#34;color:#bd93f9&#34;&gt;256&lt;/span&gt; Bytes, erase size &lt;span style=&#34;color:#bd93f9&#34;&gt;4&lt;/span&gt; KiB, total &lt;span style=&#34;color:#bd93f9&#34;&gt;4&lt;/span&gt; MiB
Net:   eth0: neta@30000 &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;PRIME&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;for my board, thats 1GB(2x 512MB) DDR3 ram on 800Mhz and 1Ghz cpu.&lt;/p&gt;

&lt;p&gt;with this information, get the right file from &lt;a href=&#34;https://dl.armbian.com/espressobin/u-boot/&#34;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;the specs in the filenames are in the format MEM-RAM_CHIPS-CPU_DDR, so i get &lt;code&gt;flash-image-ddr3-1g-2cs-1000_800.bin&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;put this file on your ext4 formatted usb stick and plug it in your espressobin.
(the armbian docs say you have to use a FAT formatted usb stick,
but the board did not recognize the usb stick - so i just went with the
&lt;a href=&#34;http://wiki.espressobin.net/tiki-index.php?page=Update+the+Bootloader#USB_stick_or_SD_card&#34;&gt;espressobin docs&lt;/a&gt;
and used ext4, which worked)&lt;/p&gt;

&lt;p&gt;now you can flash the bootloader:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;Marvell&amp;gt;&amp;gt; bubt flash-image-MEM-RAM_CHIPS-CPU_DDR.bin spi usb&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;with the new bootloader, a new bootscript is needed. run:
(the snippet is copied from here &lt;a href=&#34;https://www.armbian.com/espressobin/&#34;&gt;https://www.armbian.com/espressobin/&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;env default -a
setenv fdt_addr 0x6000000
setenv kernel_addr 0x7000000
setenv loadaddr 0x8000000
setenv initrd_size 0x2000000
setenv initrd_addr 0x1100000
setenv scriptaddr 0x6d00000
setenv initrd_image uInitrd
setenv image_name Image
setenv boot_targets &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;usb sata mmc1 mmc0&amp;#39;&lt;/span&gt;
setenv boot_prefixes &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;/ /boot/&amp;#39;&lt;/span&gt;
setenv bootcmd_mmc0 &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;setenv devnum 0; setenv boot_interface mmc; run scan_dev_for_boot;&amp;#39;&lt;/span&gt;
setenv bootcmd_mmc1 &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;setenv devnum 1; setenv boot_interface mmc; run scan_dev_for_boot;&amp;#39;&lt;/span&gt;
setenv bootcmd_sata &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;setenv devnum 0; scsi scan; scsi dev 0; setenv boot_interface scsi; run scan_dev_for_boot;&amp;#39;&lt;/span&gt;
setenv bootcmd_usb &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;setenv devnum 0; usb start;setenv boot_interface usb; run scan_dev_for_boot;&amp;#39;&lt;/span&gt;
setenv bootcmd &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;for target in ${boot_targets}; do run bootcmd_${target}; done&amp;#39;&lt;/span&gt;
setenv scan_dev_for_boot &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;for prefix in ${boot_prefixes}; do echo ${prefix};run boot_a_script; done&amp;#39;&lt;/span&gt;
setenv boot_a_script &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;ext4load ${boot_interface} ${devnum}:1 ${scriptaddr} ${prefix}boot.scr;source ${scriptaddr};&amp;#39;&lt;/span&gt;
saveenv
&lt;span style=&#34;color:#6272a4&#34;&gt;# Including this line to make sure saveenv is executed.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;for some reason, when just pasting the whole block to the shell, there were some characters missing -
so i had to paste it line by line&amp;hellip; :/&lt;/p&gt;

&lt;h1 id=&#34;2-installing-armbian&#34;&gt;2. installing armbian&lt;/h1&gt;

&lt;p&gt;after you upgraded the bootloader, get your armbian image.
download the version you want (from here &lt;a href=&#34;http://wiki.espressobin.net/tiki-index.php?page=Serial+connection+-+Linux&#34;&gt;http://wiki.espressobin.net/tiki-index.php?page=Serial+connection+-+Linux&lt;/a&gt;)
unpack it, and dd the file to your sd card.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo dd &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;Desktop/Armbian_XYZ.img &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;of&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;/dev/sdX&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;flashing will probably take a few minutes. grab a coffee. :)&lt;/p&gt;

&lt;p&gt;when its finished, plug the sd card in your espressobin and restart - it should boot into your new debian!&lt;/p&gt;

&lt;p&gt;the default login is &lt;code&gt;root / 1234&lt;/code&gt;. you will need to change the password on first boot, and also create a user.&lt;/p&gt;

&lt;p&gt;after this its safe to unplug the board and connect it to your router,
connect via ssh, run updates, have some debian fun. :)&lt;/p&gt;

&lt;p&gt;after connecting via ssh, i noticed that the remote terminal was behaving a bit weird.
was fixed after i set &lt;code&gt;TERM=xterm-256color&lt;/code&gt;.&lt;/p&gt;
</description>
    </item>
  </channel>
</rss>